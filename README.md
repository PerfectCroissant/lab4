<H1 style="text-align: center;">Управление данными в ООП с использованием шаблонов и STL в C++</H1>

---
<H1 style="text-align: center;">Постановка задач</H1>

---

## Цель: <br>
> Реализовать управление книгами в абстрактной библиотеке

## Подзадачи:
> 1. **Определение общих классов**<br>
> Создать класс Book с характеристиками книги, такими как название, автор, жанр, и методами для работы с книгой.
> 2. **Шаблоны**<br>
> Реализовать шаблонный класс Pair для хранения пары характеристик книги, например, <std::string, std::string> для названия книги и её автора.
> 3. **STL**<br>
> Применить алгоритмы STL для управления каталогом библиотеки (например, сортировки книг по автору).
> 4. **ООП**<br>
> Создать классы, наследующиеся от Book, представляющие разные жанры литературы(например, Fiction, NonFiction).
> Реализовать полиморфные методы для эффективной работы с разными видами книг.
> 5. **Меню и файлы**<br>
> Разработать текстовое меню для пользователя с опциями добавления, поиска, сортировки и вывода данных о книгах.
> Сохранение результатов операций в текстовый файл "output.txt" для документирования.
> 6. **Дополнительное**<br>
> Добавить функционал изменения данных о книгах.

#
---
<H1 style="text-align: center;">Описание реализации</H1>

---
## Структура классов проекта
> **Book** содержит:
> * 3 protected переменные (остальные члены публичны), сеттеры и геттеры к ним; 
> * виртуальная функция `getInfo()`, возвращающую строку данных книги с разделителем;
> * невиртуальные `saveToFile()` и `displayInfo()`, использующие `getInfo()` для получения строки данных. <br>
> `saveToFile()` использует разделитель `DELIMITER='\t'` для удобного дальнейшего считывания данных

> **Fiction** и **Nonfiction**
> <br> наследуются от **Book** и имеют всё то же, что и он, 
> но, переопределяя `getInfo()`, дописывают в строку с данными
> дополнительно "наджанр" (_fiction_ или _non-fiction_)

> **BookEntry**, выступающая единицей хранения информации в библиотеке. 
> Структура содержит только две переменные (обе public): 
> уникальную книгу (как константный указатель на тип Book) и количество её копий.
> Так достигается удобство добавления, поиска и удаления книг.<br>

> Шаблон класса **Pair** содержит:
> * 2 приватные переменные произвольного типа каждая
> * методы для вывода переменных на экран и сохранения пары в файл

## Структура меню библиотеки
Даннные хранятся в динамическом массиве в виде указателей на **BookEntry**<br>
После каждой успешной операции в файл `output.txt` записывается, что было изменено.<br>
Меню имеет 7 опций (+ опция выхода), реализующихся при помощи функций для работы с книгами.

## Функции для работы с книгами
> `saveBooksToFile` записывает в указанный файл информацию о книгах библиотеки,
> вызывая метод saveToFile для каждой книги.

> `modifyBook` изменяет один параметр книги (автора / название / жанр) при 
> помощи сеттеров класса Book.

> `eraseEntry` удаляет запись из массива библиотеки вместе с указателем на неё.

## Ведение журнала
Журнал расположен в файле "output.txt". Он открывается на дозапись каждый запуск программы.
Если команда выполнена штатно, в файл записывается информация в виде 
```
<date&time>\t<command>\t<description>
```
Дату и время предоставляет функция `currentTime`, работающая благодаря библиотеке `<chrono>`:
```C++
#include <chrono>
using sys_clock = std::chrono::system_clock;

...

string currentTime()
{
    std::time_t time = sys_clock::to_time_t(sys_clock::now());
    return std::ctime(&time);
}

// Формат выдачи: "Tue Dec 19 22:36:22 2023"
```

## Запись библиотеки в файл
Запись библиотеки в файл производится в формате `название\tавтор\tжанр` (экземпляры наследованных от Book классов имеют также наджанр).
